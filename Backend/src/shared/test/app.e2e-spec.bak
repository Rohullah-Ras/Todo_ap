// // test/app.e2e-spec.ts
// import { INestApplication, ValidationPipe } from '@nestjs/common';
// import { Test, TestingModule } from '@nestjs/testing';
// import * as request from 'supertest'; // <-- IMPORTANT: star import, NOT default
// import AppModule from '../src/app.module';
//
// describe('AppController (e2e)', () => {
//   let app: INestApplication;
//
//   beforeAll(async () => {
//     const moduleFixture: TestingModule = await Test.createTestingModule({
//       imports: [AppModule],
//     }).compile();
//
//     app = moduleFixture.createNestApplication();
//
//     // Same config as main.ts
//     app.setGlobalPrefix('api');
//
//     app.useGlobalPipes(
//       new ValidationPipe({
//         whitelist: true,
//         forbidNonWhitelisted: true,
//         transform: true,
//         transformOptions: {
//           enableImplicitConversion: true,
//         },
//       }),
//     );
//
//     await app.init();
//   });
//
//   afterAll(async () => {
//     await app.close();
//   });
//
//   it('GET /api/statuses â†’ 200', async () => {
//     return request(app.getHttpServer()).get('/api/statuses').expect(200);
//   });
// });
